
# 目标设备：Banana Pi BPI-R3 Mini
CONFIG_TARGET_mediatek=y
CONFIG_TARGET_mediatek_filogic=y
CONFIG_TARGET_mediatek_filogic_DEVICE_bananapi_bpi-r3-mini=y

CONFIG_VERSIONOPT=y
CONFIG_VERSION_FILENAMES=y
CONFIG_VERSION_REPO="https://downloads.immortalwrt.org/releases/24.10.4"

# 基础构建与系统选项
CONFIG_DEVEL=y
CONFIG_AUTOREMOVE=y
CONFIG_IB=y
CONFIG_IMAGEOPT=y
CONFIG_ALL_KMODS=y

# USB 基础
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb2=y
CONFIG_PACKAGE_kmod-usb3=y
CONFIG_PACKAGE_usb-modeswitch=y
CONFIG_PACKAGE_usbutils=y

# 串口与 AT 指令
CONFIG_PACKAGE_kmod-usb-serial=y
CONFIG_PACKAGE_kmod-usb-serial-option=y
CONFIG_PACKAGE_kmod-usb-serial-wwan=y

# 网卡驱动
CONFIG_PACKAGE_kmod-usb-net=y
CONFIG_PACKAGE_kmod-usb-net-cdc-ncm=y
CONFIG_PACKAGE_kmod-usb-net-huawei-cdc-ncm=y
CONFIG_PACKAGE_kmod-usb-net-qmi-wwan=y
CONFIG_PACKAGE_uqmi=y
CONFIG_PACKAGE_kmod-usb-net-cdc-mbim=y
CONFIG_PACKAGE_umbim=y

# 硬件加速与流量卸载管理界面
CONFIG_PACKAGE_luci-app-turboacc=y
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_OFFLOADING=y
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_BBR_CCA=y
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_FULLCONE_NAT=y

# 拨号协议管理
CONFIG_PACKAGE_comgt=y
CONFIG_PACKAGE_comgt-ncm=y
CONFIG_PACKAGE_luci-proto-ncm=y

# LuCI 界面与语言
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-i18n-base-zh-cn=y
CONFIG_PACKAGE_luci-i18n-firewall-zh-cn=y
CONFIG_PACKAGE_luci-i18n-package-manager-zh-cn=y
CONFIG_PACKAGE_default-settings=y

# 文件系统支持 (挂载 U 盘/硬盘必备)
CONFIG_PACKAGE_kmod-fs-ext4=y
CONFIG_PACKAGE_kmod-fs-exfat=y
CONFIG_PACKAGE_kmod-fs-ntfs3=y
CONFIG_PACKAGE_kmod-fs-vfat=y

# 所有 USB 驱动类
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb-storage-uas=y
CONFIG_PACKAGE_kmod-usb-printer=y
CONFIG_PACKAGE_kmod-usb-hid=y

# 调度与队列管理 (QoS 必备)
CONFIG_PACKAGE_kmod-sched-core=y
CONFIG_PACKAGE_kmod-sched-cake=y
CONFIG_PACKAGE_kmod-ifb=y

# 系统工具与网络优化
CONFIG_PACKAGE_nano=y
CONFIG_PACKAGE_wget-ssl=y
CONFIG_PACKAGE_ca-certificates=y
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_openssh-sftp-server=y

# 性能优化
CONFIG_PACKAGE_kmod-tcp-bbr=y
CONFIG_DEFAULT_tcp_bbr=y
CONFIG_TCP_CONG_BBR=y
CONFIG_NET_SCH_FQ=y
CONFIG_PACKAGE_irqbalance=y

# DNS
# CONFIG_PACKAGE_dnsmasq is not set
CONFIG_PACKAGE_dnsmasq-full=y

# 常用 VPN/隧道/加密支持
CONFIG_PACKAGE_kmod-tun=y
CONFIG_PACKAGE_kmod-wireguard=y
CONFIG_PACKAGE_kmod-udptunnel4=y
CONFIG_PACKAGE_kmod-udptunnel6=y

# NFTables/Iptables 扩展
CONFIG_PACKAGE_kmod-nft-tproxy=y
CONFIG_PACKAGE_kmod-nft-nat=y
CONFIG_PACKAGE_kmod-nft-compat=y
CONFIG_PACKAGE_kmod-ipt-tproxy=y
CONFIG_PACKAGE_kmod-ipt-nat=y
CONFIG_PACKAGE_kmod-ipt-extra=y
CONFIG_PACKAGE_kmod-ipt-ipset=y
CONFIG_PACKAGE_kmod-ipt-core=y
CONFIG_PACKAGE_kmod-ipt-fullconenat=y
CONFIG_PACKAGE_kmod-ipt-conntrack=y
CONFIG_PACKAGE_kmod-ipt-raw=y
CONFIG_PACKAGE_kmod-ipt-nat-extra=y

CONFIG_PACKAGE_kmod-lib-textsearch=y

# 必要的网络工具
CONFIG_PACKAGE_ipset=y
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_bash=y
CONFIG_PACKAGE_ruby=y
CONFIG_PACKAGE_ruby-yaml=y
CONFIG_PACKAGE_ca-certificates=y

# ⛔️ 禁用列表：防止内核臃肿
# (务必保留此部分以移除调试工具)
# CONFIG_BPF_TOOLCHAIN_BUILD_LLVM is not set
# CONFIG_HAS_BPF_TOOLCHAIN is not set
# CONFIG_KERNEL_BPF_EVENTS is not set
# CONFIG_KERNEL_XDP_SOCKETS is not set
# CONFIG_KERNEL_DEBUG_INFO_BTF is not set
# CONFIG_KERNEL_DEBUG_INFO_BTF_MODULES is not set
# CONFIG_KERNEL_FTRACE is not set
# CONFIG_KERNEL_KPROBES is not set
# CONFIG_KERNEL_PERF_EVENTS is not set
# CONFIG_COLLECT_KERNEL_DEBUG is not set
# CONFIG_LPAC_WITH_UQMI is not set
CONFIG_PACKAGE_libbpf=n
CONFIG_PACKAGE_libxdp=n
CONFIG_PACKAGE_xdp-filter=n
CONFIG_PACKAGE_xdp-loader=n
CONFIG_PACKAGE_perf=n
CONFIG_PACKAGE_libtraceevent=n
CONFIG_PACKAGE_objdump=n
CONFIG_PACKAGE_libbfd=n
CONFIG_PACKAGE_libopcodes=n
